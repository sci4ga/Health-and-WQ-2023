---
title: "WQP Data"
author: "David White"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.


The first section is loading in R packages (if not previously installed, you will need to install them using the install.packages() function)
```{r}
install.packages("dataRetrieval")
library(dataRetrieval)
test<-readWQPdata(tz="ETC", statecode=)
```

The third section is complicated. First, the excel file is loaded in using read.csv(). In the second group of code, the excel file is trimmed down and cleaned using subset, mutate, and pivot_wider() which will create individual columns for each characteristic in the WQP. After using pivot_wider() the data is cleaned again this time selecting for key characteristics. Some columns are renamed to make them easier to work with, as well as changing their data type to make them graphable.
```{r}
library(tidyverse)

setwd("C:/Users/dlwhi/Desktop/UGASpringInternship2023RProject") #<- change working directory for whatever yours is

wqpshort<-read_csv("data/wqpfinal2017-2021.csv")


wqpshort<- subset(wqpshort, select = c('OrganizationIdentifier', 'ActivityStartDate', 
                             'ActivityLocation/LatitudeMeasure', 
                             'ActivityLocation/LongitudeMeasure',
                             'CharacteristicName', 'ResultMeasureValue',
                             'ResultMeasure/MeasureUnitCode'))%>%
  mutate(TABLEID=row_number())%>%rename("lat"='ActivityLocation/LatitudeMeasure',
                                        "long"='ActivityLocation/LongitudeMeasure',
                                        "Characteristic"='CharacteristicName', "Result"='ResultMeasureValue')%>%drop_na('Result')

```



```{r}

```

